<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.yesway.pms.core.cast.expense.dao.ExpenseDaoImpl">

	<sql id="table"> pms_expense </sql>

	<sql id="update_sql">
		<set>
			<if test="name != null and name != ''">
				expense_name = #{name},
			</if>
			<if test="description != null and description != ''">
				description = #{description},
			</if>
			<if test="deleted != null and deleted != ''">
				is_deleted = #{deleted},
			</if>
		</set>
	</sql>

	<sql id="condition_sql">
		<if test="id != null">
			AND id = #{id}
		</if>
		<if test="code != null and code !=''">
			AND expense_code like CONCAT('%',#{code},'%')
		</if>
		<if test="name != null and name !=''">
			AND expense_name like CONCAT('%',#{name},'%')
		</if>
		<if test="type != null and type != ''">
			AND expense_type = #{type}
		</if>
		<if test="description != null and description !=''">
			AND description = #{description}
		</if>
		<if test="deleted != null">
			AND is_deleted = #{deleted}
		</if>
	</sql>

	<resultMap id="beanMap" type="Expense">
		<result property="id" column="id" />
		<result property="code" column="expense_code" />
		<result property="name" column="expense_name" />
		<result property="type" column="expense_type"
			typeHandler="org.apache.ibatis.type.EnumOrdinalTypeHandler" javaType="cn.yesway.pms.common.enums.ExpenseType" />
		<result property="description" column="description" />
		<result property="deleted" column="is_deleted" />
	</resultMap>


</mapper>